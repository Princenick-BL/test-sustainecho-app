{"ast":null,"code":"import _objectSpread from\"/home/prince/Formation Perso/test-sustainecho/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/prince/Formation Perso/test-sustainecho/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import axios from'axios';import{DragDropContext,Droppable,Draggable}from'react-beautiful-dnd';import'./App.css';import Feuille from'./components/feuille';import Popup from'./components/popup';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),donnees=_useState2[0],setstate=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),showPopup=_useState4[0],setShowPopup=_useState4[1];var _useState5=useState(\"Bonjour!!! Bienvenu sur mon texte technique. Prenez plaisir à le découvrir.\"),_useState6=_slicedToArray(_useState5,2),popupMessage=_useState6[0],setPopupMessage=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),popupType=_useState8[0],setPopupType=_useState8[1];useEffect(function(){setstate([]);setPopupType(\"safe\");axios.get('http://localhost:8000/employes').then(function(response){var data=[];var latestCity=\"\";var marquesdata=[];response.data.map(function(item){if(latestCity!==item.ville.nom){if(marquesdata.length!==0){data.push({city:latestCity,marques:marquesdata});marquesdata=[];}latestCity=item.ville.nom;}marquesdata.push(item);});data.push({city:latestCity,marques:marquesdata});setstate(data);});},[]);var handleOnDragEnd=function handleOnDragEnd(result){if(!result.destination)return;if(result.source.index>result.destination.index){setPopupType(\"danger\");setShowPopup(true);setPopupMessage(\" Ce mouvement n'est pas autorisé.\");return;}console.log(result.source);console.log(\"destination : \"+result.destination);var items=Array.from(donnees);var _items$splice=items.splice(result.source.index,1),_items$splice2=_slicedToArray(_items$splice,1),reorderedItem=_items$splice2[0];items.splice(result.destination.index,0,reorderedItem);setstate(items);};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Popup,{showPopup:showPopup,callback:function callback(state){setShowPopup(state);},message:popupMessage,popupType:popupType}),/*#__PURE__*/_jsxs(\"header\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Test technique SustainEcho\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Prince Nick BALLO\"})]}),/*#__PURE__*/_jsx(\"main\",{className:\"body\",children:/*#__PURE__*/_jsx(DragDropContext,{onDragEnd:handleOnDragEnd,children:/*#__PURE__*/_jsx(Droppable,{droppableId:\"boxes\",children:function children(provided){return/*#__PURE__*/_jsxs(\"div\",_objectSpread(_objectSpread({className:\"boxes\"},provided.droppableProps),{},{ref:provided.innerRef,children:[donnees.map(function(items,index){return/*#__PURE__*/_jsx(Draggable,{draggableId:\"\"+index,index:index,children:function children(provided){return/*#__PURE__*/_jsxs(\"div\",_objectSpread(_objectSpread(_objectSpread({className:\"box\",ref:provided.innerRef},provided.draggableProps),provided.dragHandleProps),{},{children:[/*#__PURE__*/_jsx(\"div\",{className:\"parent\",children:/*#__PURE__*/_jsx(Feuille,{children:items.city})}),items.marques.map(function(item){return/*#__PURE__*/_jsx(\"div\",{className:\"fils\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"ligne\",children:[/*#__PURE__*/_jsx(Feuille,{children:item.marque.nom}),/*#__PURE__*/_jsx(Feuille,{children:item.nb_employe})]})});})]}));}},index);}),provided.placeholder]}));}})})})]});}export default App;","map":{"version":3,"sources":["/home/prince/Formation Perso/test-sustainecho/frontend/src/App.js"],"names":["useState","useEffect","axios","DragDropContext","Droppable","Draggable","Feuille","Popup","App","donnees","setstate","showPopup","setShowPopup","popupMessage","setPopupMessage","popupType","setPopupType","get","then","response","data","latestCity","marquesdata","map","item","ville","nom","length","push","city","marques","handleOnDragEnd","result","destination","source","index","console","log","items","Array","from","splice","reorderedItem","state","provided","droppableProps","innerRef","draggableProps","dragHandleProps","marque","nb_employe","placeholder"],"mappings":"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","sourcesContent":["import { useState ,useEffect} from 'react';\nimport axios from 'axios'\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\n\nimport './App.css';\nimport Feuille from './components/feuille';\nimport Popup from './components/popup';\n\nfunction App() {\n\n  const [donnees, setstate] = useState([])\n  const [showPopup,setShowPopup]=useState(true)\n  const [popupMessage,setPopupMessage]=useState(\"Bonjour!!! Bienvenu sur mon texte technique. Prenez plaisir à le découvrir.\")\n  const [popupType,setPopupType]=useState(\"\")\n\n  useEffect(()=>{\n    setstate([])\n    setPopupType(\"safe\")\n    \n    axios.get('http://localhost:8000/employes')\n    .then(response => {\n\n      let data = []\n      let latestCity=\"\"\n      let marquesdata=[]\n\n      response.data.map((item) => {\n\n        if(latestCity!==item.ville.nom){\n\n          \n          if(marquesdata.length!==0){\n            \n            data.push({city:latestCity,marques: marquesdata})\n            \n            marquesdata=[]\n            \n          }\n\n          latestCity=item.ville.nom\n\n        }\n\n        marquesdata.push(item)\n\n      })\n      data.push({city:latestCity,marques: marquesdata})\n\n\n      setstate(data)\n\n    })\n\n  },[])\n\n  const handleOnDragEnd =(result)=>{\n    if (!result.destination) return;\n    if(result.source.index > result.destination.index){\n      setPopupType(\"danger\")\n      setShowPopup(true)\n      setPopupMessage(\" Ce mouvement n'est pas autorisé.\")\n      return;\n    } \n    console.log(result.source)\n    console.log(\"destination : \"+result.destination)\n    const items = Array.from(donnees);\n    const [reorderedItem] = items.splice(result.source.index, 1);\n    items.splice(result.destination.index, 0, reorderedItem);\n    \n    setstate(items);\n  }\n\n\n\n\n  \n  \n  return (\n    <div className=\"App\">\n      <Popup\n        showPopup={showPopup}\n        callback = {(state)=>{setShowPopup(state)}}\n        message = {popupMessage}\n        popupType = {popupType}\n      />\n      <header className=\"header\">\n        <div>Test technique SustainEcho</div>\n        <div>Prince Nick BALLO</div>\n\n      </header>\n      <main className=\"body\">\n        <DragDropContext onDragEnd={handleOnDragEnd}>\n          <Droppable droppableId=\"boxes\" >\n            {(provided)=>(\n\n              <div className=\"boxes\" {...provided.droppableProps} ref={provided.innerRef}>\n                {donnees.map((items,index) => {\n                  return(\n                    <Draggable  key={index} draggableId={\"\"+index} index={index} >\n                      {(provided)=>(\n                        <div className=\"box\" ref={provided.innerRef} {...provided.draggableProps} {...provided.dragHandleProps}>\n                          <div className=\"parent\"><Feuille>{items.city}</Feuille></div>\n                          {items.marques.map((item) => {\n                            return(\n                              <div className=\"fils\">\n                                <div  className=\"ligne\">\n                                  <Feuille>{item.marque.nom}</Feuille>\n                                  <Feuille>{item.nb_employe}</Feuille>\n                                </div>\n                              </div>\n                            )})\n                          }\n                        </div>\n\n                      )}\n                    </Draggable>\n                    \n                  )})\n                }\n                {provided.placeholder}\n                \n              </div>\n            )}\n          </Droppable>\n        </DragDropContext>\n   \n      </main>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}