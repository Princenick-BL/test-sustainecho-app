{"ast":null,"code":"var _jsxFileName = \"/home/prince/Formation Perso/test-sustainecho/frontend/src/App.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\nimport './App.css';\nimport Feuille from './components/feuille';\nimport Popup from './components/popup';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [donnees, setstate] = useState([]);\n  const [showPopup, setShowPopup] = useState(true);\n  const [popupMessage, setPopupMessage] = useState(\"Bonjour!!! Bienvenu sur mon texte technique. Prenez plaisir à le découvrir.\");\n  const [popupType, setPopupType] = useState(\"\");\n  useEffect(() => {\n    setstate([]);\n    setPopupType(\"safe\");\n    axios.get('http://localhost:8000/employes').then(response => {\n      let data = [];\n      let latestCity = \"\";\n      let marquesdata = [];\n      response.data.map(item => {\n        if (latestCity !== item.ville.nom) {\n          if (marquesdata.length !== 0) {\n            data.push({\n              city: latestCity,\n              marques: marquesdata\n            });\n            marquesdata = [];\n          }\n\n          latestCity = item.ville.nom;\n        }\n\n        marquesdata.push(item);\n      });\n      data.push({\n        city: latestCity,\n        marques: marquesdata\n      });\n      setstate(data);\n    });\n  }, []);\n\n  const handleOnDragEnd = result => {\n    if (!result.destination) return;\n\n    if (result.source.index > result.destination.index) {\n      setPopupType(\"danger\");\n      setShowPopup(true);\n      setPopupMessage(\" Ce mouvement n'est pas autorisé.\");\n      return;\n    }\n\n    console.log(result.source);\n    console.log(\"destination : \" + result.destination);\n    const items = Array.from(donnees);\n    const [reorderedItem] = items.splice(result.source.index, 1);\n    items.splice(result.destination.index, 0, reorderedItem);\n    setstate(items);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(Popup, {\n      showPopup: showPopup,\n      callback: state => {\n        setShowPopup(state);\n      },\n      message: popupMessage,\n      popupType: popupType\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Test technique SustainEcho\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Prince Nick BALLO\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"body\",\n      children: /*#__PURE__*/_jsxDEV(DragDropContext, {\n        onDragEnd: handleOnDragEnd,\n        children: /*#__PURE__*/_jsxDEV(Droppable, {\n          droppableId: \"boxes\",\n          children: provided => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"boxes\",\n            ...provided.droppableProps,\n            ref: provided.innerRef,\n            children: [donnees.map((items, index) => {\n              return /*#__PURE__*/_jsxDEV(Draggable, {\n                draggableId: \"\" + index,\n                index: index,\n                children: provided => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"box\",\n                  ref: provided.innerRef,\n                  ...provided.draggableProps,\n                  ...provided.dragHandleProps,\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"parent\",\n                    children: /*#__PURE__*/_jsxDEV(Feuille, {\n                      children: items.city\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 102,\n                      columnNumber: 51\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 102,\n                    columnNumber: 27\n                  }, this), items.marques.map(item => {\n                    return /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"fils\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"ligne\",\n                        children: [/*#__PURE__*/_jsxDEV(Feuille, {\n                          children: item.marque.nom\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 107,\n                          columnNumber: 35\n                        }, this), /*#__PURE__*/_jsxDEV(Feuille, {\n                          children: item.nb_employe\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 108,\n                          columnNumber: 35\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 106,\n                        columnNumber: 33\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 105,\n                      columnNumber: 31\n                    }, this);\n                  })]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 101,\n                  columnNumber: 25\n                }, this)\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 21\n              }, this);\n            }), provided.placeholder]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"/nicYTJ8RLi3Div3rqpjOniMMso=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/home/prince/Formation Perso/test-sustainecho/frontend/src/App.js"],"names":["useState","useEffect","axios","DragDropContext","Droppable","Draggable","Feuille","Popup","App","donnees","setstate","showPopup","setShowPopup","popupMessage","setPopupMessage","popupType","setPopupType","get","then","response","data","latestCity","marquesdata","map","item","ville","nom","length","push","city","marques","handleOnDragEnd","result","destination","source","index","console","log","items","Array","from","reorderedItem","splice","state","provided","droppableProps","innerRef","draggableProps","dragHandleProps","marque","nb_employe","placeholder"],"mappings":"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","sourcesContent":["import { useState ,useEffect} from 'react';\nimport axios from 'axios'\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\n\nimport './App.css';\nimport Feuille from './components/feuille';\nimport Popup from './components/popup';\n\nfunction App() {\n\n  const [donnees, setstate] = useState([])\n  const [showPopup,setShowPopup]=useState(true)\n  const [popupMessage,setPopupMessage]=useState(\"Bonjour!!! Bienvenu sur mon texte technique. Prenez plaisir à le découvrir.\")\n  const [popupType,setPopupType]=useState(\"\")\n\n  useEffect(()=>{\n    setstate([])\n    setPopupType(\"safe\")\n    \n    axios.get('http://localhost:8000/employes')\n    .then(response => {\n\n      let data = []\n      let latestCity=\"\"\n      let marquesdata=[]\n      \n      response.data.map((item) => {\n        \n        if(latestCity!==item.ville.nom){\n\n          \n          if(marquesdata.length!==0){\n            \n            data.push({city:latestCity,marques: marquesdata})\n            \n            marquesdata=[]\n            \n          }\n\n          latestCity=item.ville.nom\n\n        }\n\n        marquesdata.push(item)\n\n      })\n      data.push({city:latestCity,marques: marquesdata})\n\n\n      setstate(data)\n\n    })\n\n  },[])\n\n  const handleOnDragEnd =(result)=>{\n    if (!result.destination) return;\n    if(result.source.index > result.destination.index){\n      setPopupType(\"danger\")\n      setShowPopup(true)\n      setPopupMessage(\" Ce mouvement n'est pas autorisé.\")\n      return;\n    } \n    console.log(result.source)\n    console.log(\"destination : \"+result.destination)\n    const items = Array.from(donnees);\n    const [reorderedItem] = items.splice(result.source.index, 1);\n    items.splice(result.destination.index, 0, reorderedItem);\n    \n    setstate(items);\n  }\n\n\n\n\n  \n  \n  return (\n    <div className=\"App\">\n      <Popup\n        showPopup={showPopup}\n        callback = {(state)=>{setShowPopup(state)}}\n        message = {popupMessage}\n        popupType = {popupType}\n      />\n      <header className=\"header\">\n        <div>Test technique SustainEcho</div>\n        <div>Prince Nick BALLO</div>\n\n      </header>\n      <main className=\"body\">\n        <DragDropContext onDragEnd={handleOnDragEnd}>\n          <Droppable droppableId=\"boxes\" >\n            {(provided)=>(\n\n              <div className=\"boxes\" {...provided.droppableProps} ref={provided.innerRef}>\n                {donnees.map((items,index) => {\n                  return(\n                    <Draggable  key={index} draggableId={\"\"+index} index={index} >\n                      {(provided)=>(\n                        <div className=\"box\" ref={provided.innerRef} {...provided.draggableProps} {...provided.dragHandleProps}>\n                          <div className=\"parent\"><Feuille>{items.city}</Feuille></div>\n                          {items.marques.map((item) => {\n                            return(\n                              <div className=\"fils\">\n                                <div  className=\"ligne\">\n                                  <Feuille>{item.marque.nom}</Feuille>\n                                  <Feuille>{item.nb_employe}</Feuille>\n                                </div>\n                              </div>\n                            )})\n                          }\n                        </div>\n\n                      )}\n                    </Draggable>\n                    \n                  )})\n                }\n                {provided.placeholder}\n                \n              </div>\n            )}\n          </Droppable>\n        </DragDropContext>\n   \n      </main>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}